<!DOCTYPE html><html><head><meta charset=utf-8><meta content="IE=edge,chrome=1" http-equiv=X-UA-Compatible><title>実際に読んで分かった、はてなJSのダメなコード - かなりすごいブログ</title><link href="/stylesheets/theme-0e5c450e.css" rel=stylesheet /><link href="/stylesheets/monokai-16825c43.css" rel=stylesheet /></head><body role=main><header><h1><a href="/">かなりすごいブログ</a></h1></header><div id=main><div class=entry><div class=entry-header><h1> 実際に読んで分かった、はてなJSのダメなコード </h1><div class=entry-tags><li class="default label"><i class=icon-tag></i><a href="/tags/javascript.html">Javascript</a></li></div><span class=entry-date>2014年03月15日</span></div><div class=entry-share><div class="share hatena"><a onclick="window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=530,width=510');return false;" href="//b.hatena.ne.jp/add?mode=confirm&amp;url=/articles/javascript/hatena-js-peropero.html&amp;title=実際に読んで分かった、はてなJSのダメなコード">はてブに追加</a></div><div class="share twitter"><a onclick="window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=230,width=600');return false;" href="//twitter.com/share?text=実際に読んで分かった、はてなJSのダメなコード&amp;url=/articles/javascript/hatena-js-peropero.html">この記事をツイート</a></div><div class="share feedly"><a target=_blank href="//cloud.feedly.com/#subscription%2Ffeed%2F%2Ffeed.xml">Feedlyで購読</a></div></div><div class=entry-body><h2 id="はてなブログjsについて">はてなブログJSについて</h2><p>最近話題になってるはてなブログのjavascriptですが、このブログをMiddlemanで構築した時に「はてなブックマークブログパーツ」のjavascriptコードを読んでげんなりしたのを思い出したので、この際ついでにこっちも公にしておこうかと思って記事にします。はてなブログのJSではないという意味でタイトルは釣りです。</p><h2 id="はてなブックマークブログパーツとは">はてなブックマークブログパーツとは</h2><p><a href="//b.hatena.ne.jp/guide/blogparts">はてなブックマークブログパーツ</a>とは、あなたがお持ちのブログにはてなブックマークの各種情報を貼り付けることができるブログパーツです。はてなが提供しているHTMLタグとjavascriptの読み込みコードを貼り付けることで設置することができます。</p><p>ブログパーツは複数種類あるのですが、今回はこのブログに貼ろうとした「ブックマークのコメントを表示」というパーツのコードを読んでみます。</p><p><img src="/images/uploads/2014-03-15-blogparts-0c919c21.png" class=full /></p><h2 id="ブログパーツの設置方法">ブログパーツの設置方法</h2><p>さて、<a href="//b.hatena.ne.jp/guide/blogparts.select?type=blogparts">ブログパーツの設置方法解説ページ</a>には、以下の2ステップでブログパーツを貼り付けできると解説されています。</p><h3 id="javascriptの読み込みとデフォルト設定の記述">javascriptの読み込みとデフォルト設定の記述</h3><pre class="highlight html"><span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span> <span class="na">charset=</span><span class="s">"utf-8"</span> <span class="na">src=</span><span class="s">"http://b.hatena.ne.jp/js/bookmark_blogparts.js"</span><span class="nt">&gt;&lt;/script&gt;</span>
<span class="nt">&lt;script </span><span class="na">type=</span><span class="s">"text/javascript"</span><span class="nt">&gt;</span>
<span class="nx">HBBlogParts</span><span class="p">.</span><span class="nx">commentInsertSelector</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">'div.hatena-bookmark-marker'</span><span class="p">,</span> <span class="s1">'div.article-body-inner'</span><span class="p">,</span> <span class="s1">'div.blogbody div.mainmore'</span><span class="p">,</span> <span class="s1">'div.blogbody div.main'</span><span class="p">,</span> <span class="s1">'div.entry-body-main'</span><span class="p">];</span>
<span class="nx">HBBlogParts</span><span class="p">.</span><span class="nx">insertPosition</span> <span class="o">=</span> <span class="s1">'after'</span><span class="p">;</span>
<span class="nx">HBBlogParts</span><span class="p">.</span><span class="nx">permalinkSelector</span> <span class="o">=</span> <span class="p">[</span> <span class="s1">'div.hatena-bookmark-marker a'</span><span class="p">,</span> <span class="s1">'div h3 a'</span><span class="p">,</span> <span class="s1">'h2.title a'</span><span class="p">,</span> <span class="s1">'h2.entry-title a'</span><span class="p">,</span> <span class="s1">'.posted a'</span> <span class="p">];</span>
<span class="nx">HBBlogParts</span><span class="p">.</span><span class="nx">permalinkPathRegexp</span> <span class="o">=</span> <span class="sr">/\/archives\/\d+\.html$/</span><span class="p">;</span>
<span class="nx">HBBlogParts</span><span class="p">.</span><span class="nx">permalinkAttribute</span> <span class="o">=</span> <span class="s1">'href'</span><span class="p">;</span>
<span class="nt">&lt;/script&gt;</span>
</pre><p>1行目では<a href="//b.hatena.ne.jp/js/bookmark_blogparts.js">http://b.hatena.ne.jp/js/bookmark_blogparts.js</a>を読み込み、2行目以降ではどうもオプションの設定を行っている様です。</p><h3 id="ブックマークコメント一覧を表示したい位置にdivタグを設置">ブックマークコメント一覧を表示したい位置にdivタグを設置</h3><pre class="highlight html"><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">"hatena-bookmark-marker"</span> <span class="nt">&gt;&lt;a</span> <span class="na">style=</span><span class="s">"display:none;"</span> <span class="na">href=</span><span class="s">"※"</span><span class="nt">&gt;&lt;/a&gt;&lt;/div&gt;</span>
</pre><p>※）設置ブログ記事ページのURL</p><p>どうやら、<code>hatena-bookmark-marker</code>というclassが指定されたdivタグの中身がブックマークコメント一覧に置き換えられる様ですね。</p><h3 id="オプション設定の変更">オプション設定の変更</h3><p><a href="//developer.hatena.ne.jp/ja/documents/bookmark/misc/comment_blogparts">はてなブックマークコメント表示ブログパーツ</a>というページを見ると、オプション一覧の解説とオプションの書き換え方法が記載されています。これらのオプションを使って挙動や見た目をカスタマイズするらしいですね。</p><h2 id="問題点">問題点</h2><p>ここで結論から言ってしまうと、このjavascriptスクリプトのオプション指定方法には問題があり、オプションの指定が利きません。</p><p>解説します。</p><h3 id="オプション用プロパティの宣言と上書き">オプション用プロパティの宣言と上書き</h3><p>このjavascriptコードは、オプション設定をグローバル変数<code>HBBlogParts</code>というオブジェクトのプロパティを自分の好きな値で宣言することで指定できる様な形式にしています。</p><p>ここで、javascriptのコードを実際に読んでみましょう。</p><pre class="highlight javascript"><span class="c1">//alert('start');
</span><span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">HBBlogParts</span> <span class="o">==</span> <span class="s1">'undefined'</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">HBBlogParts</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="nx">HBBlogParts</span><span class="p">.</span><span class="nx">_alreadyShown</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="nx">HBBlogParts</span><span class="p">.</span><span class="nx">shownPermalinks</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="nx">HBBlogParts</span><span class="p">.</span><span class="nx">catchCount</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre><p>一番最初のコードがこれです。この後この<code>HBBlogParts</code>というオブジェクトのプロパティに、実際にはてなブックマークコメントを取得してブログのDOMに追加していく処理を持った関数が宣言されていきます。次に後半のコードを見ます。</p><pre class="highlight javascript"><span class="nx">HBBlogParts</span><span class="p">.</span><span class="nx">Design</span> <span class="o">=</span> <span class="kc">null</span><span class="p">;</span>
<span class="nx">HBBlogParts</span><span class="p">.</span><span class="nx">useUserCSS</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
<span class="nx">HBBlogParts</span><span class="p">.</span><span class="nx">cssName</span>    <span class="o">=</span> <span class="s1">'basic'</span><span class="p">;</span>
<span class="nx">HBBlogParts</span><span class="p">.</span><span class="nx">listPageCommentLimit</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
<span class="nx">HBBlogParts</span><span class="p">.</span><span class="nx">permalinkCommentLimit</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
<span class="kd">var</span> <span class="nx">hatenaRegexp</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span> <span class="s1">'^https?://[^/]+.hatena.ne.jp/([^/]+)/'</span> <span class="p">);</span>

<span class="k">if</span> <span class="p">(</span> <span class="nx">hatenaRegexp</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span> <span class="nx">location</span><span class="p">.</span><span class="nx">href</span> <span class="p">)</span> <span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">userName</span> <span class="o">=</span> <span class="nx">hatenaRegexp</span><span class="p">.</span><span class="nx">exec</span><span class="p">(</span><span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span> <span class="o">||</span> <span class="s1">''</span><span class="p">;</span>
    <span class="nx">HBBlogParts</span><span class="p">.</span><span class="nx">isHatenaService</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
    <span class="k">if</span> <span class="p">(</span> <span class="nx">location</span><span class="p">.</span><span class="nx">href</span><span class="p">.</span><span class="nx">indexOf</span><span class="p">(</span><span class="s1">'g.hatena.ne.jp'</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="p">)</span> <span class="p">{</span>
        <span class="nx">HBBlogParts</span><span class="p">.</span><span class="nx">commentInsertSelector</span> <span class="o">=</span> <span class="s1">'div.section'</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="nx">HBBlogParts</span><span class="p">.</span><span class="nx">permalinkCommentInsertSelector</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'div.comment'</span><span class="p">,</span> <span class="s1">'div.section'</span><span class="p">];</span>
        <span class="nx">HBBlogParts</span><span class="p">.</span><span class="nx">commentInsertSelector</span> <span class="o">=</span> <span class="s1">'div.section'</span><span class="p">;</span>
    <span class="p">}</span>
    <span class="nx">HBBlogParts</span><span class="p">.</span><span class="nx">insertPosition</span> <span class="o">=</span> <span class="s1">'after'</span><span class="p">;</span>
    <span class="nx">HBBlogParts</span><span class="p">.</span><span class="nx">permalinkSelector</span> <span class="o">=</span> <span class="s1">'div.section h3 a'</span><span class="p">;</span>
    <span class="nx">HBBlogParts</span><span class="p">.</span><span class="nx">permalinkAttribute</span> <span class="o">=</span> <span class="s1">'href'</span><span class="p">;</span>
    <span class="nx">HBBlogParts</span><span class="p">.</span><span class="nx">permalinkPathRegexp</span> <span class="o">=</span> <span class="k">new</span> <span class="nb">RegExp</span><span class="p">(</span> <span class="nx">userName</span> <span class="o">+</span> <span class="s1">'/\\d{8}'</span><span class="p">);</span>
    <span class="nx">HBBlogParts</span><span class="p">.</span><span class="nx">useCanonicalizedURI</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
    <span class="nx">HBBlogParts</span><span class="p">.</span><span class="nx">listPageCommentLimit</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span>
    <span class="nx">HBBlogParts</span><span class="p">.</span><span class="nx">permalinkCommentLimit</span> <span class="o">=</span> <span class="mi">9999</span><span class="p">;</span>
<span class="p">}</span>

<span class="k">if</span> <span class="p">(</span> <span class="k">typeof</span> <span class="nx">HBBlogPartsFromBookmarklet</span> <span class="o">==</span> <span class="s1">'undefined'</span> <span class="p">)</span> <span class="p">{</span>
    <span class="nx">HBBlogParts</span><span class="p">.</span><span class="nx">register</span><span class="p">();</span>
<span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="nx">p</span><span class="p">(</span><span class="s1">'From Bookmark let'</span><span class="p">);</span>
<span class="p">}</span>
</pre><p><code>HBBlogParts.register</code>という関数が呼ばれていますね。この関数はページのDOMロード完了を監視して、完了した時点で<code>HBBlogParts.start</code>という関数を呼びます。<code>HBBlogParts.start</code>は実際にブックマークコメントを取得してDOMを書き換えるメインルーチンです。</p><p><strong>あれっちょっとまって…</strong></p><p>これ、<code>HBBlogParts.register</code>関数を呼ぶ直前に、各オプションをデフォルト値で上書きしてませんか？</p><p>実際に、</p><pre class="highlight javascript"><span class="nx">HBBlogParts</span><span class="p">.</span><span class="nx">listPageCommentLimit</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
<span class="nx">HBBlogParts</span><span class="p">.</span><span class="nx">Design</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'t'</span><span class="p">,</span><span class="s1">'c'</span><span class="p">,</span><span class="s1">'s'</span><span class="p">]</span>
</pre><p>とか指定しても、ブラウザのデベロッパーコンソールで<code>HBBlogParts</code>のプロパティを見ると、やはりデフォルト値で上書きされてしまっています。</p><p><code>HBBlogParts.permalinkURI</code>や<code>HBBlogParts.permalinkPathRegexp</code>といったブログパーツの動作に不可欠なオプションはさすがに上書きされていないようですが、<code>HBBlogParts.Design</code>の様な、デフォルト値でもとりあえず動作するといったプロパティの多くがデフォルト値で上書きされています。</p><p><strong>オプション設定とはなんだったのか…</strong></p><p>処理の流れからして、どうしてもオプション指定をしたい場合、「<code>HBBlogParts.register</code>が呼ばれた後」かつ「ページのDOM読み込みが完了して実際に<code>HBBlogParts.start</code>関数の処理が開始されてしまう前」といったピンポイントのタイミングで、非同期的にこれら<code>HBBlogParts</code>オブジェクトのプロパティを書き換える必要があります。難易度高い…</p><h2 id="こう改善してほしい">こう改善してほしい</h2><ul><li>オプションを問答無用でデフォルト値で上書きするのやめて…</li><li>どうせ表示したい位置にdivタグを設置するのだから、グローバル変数のプロパティを書き換えるのでなく、<code>data-*</code>属性で各オプション設定を指定できるようにしてほしい <ul><li>そうすれば<code>HBBlogParts</code>という変数でグローバル汚染しなくてもよいのでは。よくわかんないけど。</li></ul></li><li>ついでにこっちもminifyとかgzip配信とかやってほしい</li></ul><h2 id="まとめ">まとめ</h2><p>はてなさんがやる気になってるっぽいですし、なんか直接報告しても反応ないという噂なので、便乗して公にしてブログパーツウィジェットのJSも改善してもらおうという記事でした。ブコメ一覧ウィジェット使いたいです。よろしくお願いします。</p><p>あと、私は普段Rubyばかり書いていてjavascriptにはあまり詳しくはないので、もし間違いがあれば訂正してお詫びします。という予防線を張っておきます。</p></div><div class=entry-share><div class="share hatena"><a onclick="window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=530,width=510');return false;" href="//b.hatena.ne.jp/add?mode=confirm&amp;url=/articles/javascript/hatena-js-peropero.html&amp;title=実際に読んで分かった、はてなJSのダメなコード">はてブに追加</a></div><div class="share twitter"><a onclick="window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=230,width=600');return false;" href="//twitter.com/share?text=実際に読んで分かった、はてなJSのダメなコード&amp;url=/articles/javascript/hatena-js-peropero.html">この記事をツイート</a></div><div class="share feedly"><a target=_blank href="//cloud.feedly.com/#subscription%2Ffeed%2F%2Ffeed.xml">Feedlyで購読</a></div></div><div class=entry-author><div class=avatar><img src="/images/kokoro-chan-da2b7132.png"></div><div class=profile><h3> supermomonga </h3><p> かなりすごいことでゆうめい。したまちでしらぬものはいない。 </p><a href="https://twitter.com/supermomonga" class=twitter-follow-button data-show-count=false data-lang=ja data-size=large data-dnt=true>@supermomongaさんをフォロー</a></div></div><div class=entry-meta><h3> あわせてよみたい </h3><ul><li><a href="/articles/vim/vim-douzo.html">･▿･)つVim)‾▿◝ ),;&#8217;</a></li><li><a href="/articles/emacs/emacs-and-vi.html">EmacsユーザーがVimを1ヶ月使った感想</a></li><li><a href="/articles/jruby/javafx-rawr.html">RubyでGUIアプリを作るならJRuby+JavaFX+Rawrで決まり！</a></li><li><a href="/articles/vim/automatic.html">automatic.vimでウィンドウの一時的分割をハンドリングしよう</a></li><li><a href="/articles/vim/neobundle-sugoibenri.html">ももんが流NeoBundle管理術</a></li><li><a href="/articles/vim/taiwa.html">Vimと対話せよ</a></li><li><a href="/articles/vim/vimshell-dynamicprompt.html">VimShellが動的プロンプトに対応しました（やばい）</a></li><li><a href="/articles/vim/jazzradio-vim-released.html">ジャズだって聴ける。そう、Vimならね。</a></li><li><a href="/articles/vim/neobundle-sugoi-setting.html">新・ももんが流NeoBundle管理術（あたらしい）</a></li><li><a href="/articles/りんごまっち/yabai.html">ウェブサービスリリースしたので前代未聞のやばい広告枠売ります</a></li></ul></div></div><aside><h2> タグ一覧ですよ </h2><ul><li class="default label"><i class=icon-tag></i><a href="/tags/emacs.html">Emacs</a>(6) </li><li class="default label"><i class=icon-tag></i><a href="/tags/java.html">Java</a>(5) </li><li class="default label"><i class=icon-tag></i><a href="/tags/jdee.html">JDEE</a>(5) </li><li class="default label"><i class=icon-tag></i><a href="/tags/swt.html">SWT</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/svn.html">svn</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/ubuntu.html">Ubuntu</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/facebook.html">facebook</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/windows.html">Windows</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/mac.html">Mac</a>(2) </li><li class="default label"><i class=icon-tag></i><a href="/tags/fx.html">FX</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/metatrader4.html">MetaTrader4</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/vim.html">Vim</a>(19) </li><li class="default label"><i class=icon-tag></i><a href="/tags/ruby.html">Ruby</a>(5) </li><li class="default label"><i class=icon-tag></i><a href="/tags/jruby.html">JRuby</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/javafx.html">JavaFX</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/lingr.html">Lingr</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/neobundle.html">NeoBundle</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/minecraft.html">Minecraft</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/thingspast.html">ThingsPast</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/others.html">Others</a>(2) </li><li class="default label"><i class=icon-tag></i><a href="/tags/elixir.html">Elixir</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/javascript.html">Javascript</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/neta.html">Neta</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/rails.html">Rails</a>(1) </li></ul><h2> 聴いてるやつ </h2><ul class=amazon_products><li><a href="//www.amazon.co.jp/gp/product/B000F6YUD2/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=247&creative=1211&creativeASIN=B000F6YUD2&linkCode=as2&tag=supermomonga-22"><img src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B000F6YUD2&Format=_SL110_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=supermomonga-22"></a><img src="//ir-jp.amazon-adsystem.com/e/ir?t=supermomonga-22&l=as2&o=9&a=B000F6YUD2" width=1 height=1 border=0 alt="" style="border:none !important; margin:0px !important;"></li><li><a href="//www.amazon.co.jp/gp/product/B001NJNN42/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=247&creative=1211&creativeASIN=B001NJNN42&linkCode=as2&tag=supermomonga-22"><img src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B001NJNN42&Format=_SL110_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=supermomonga-22"></a><img src="//ir-jp.amazon-adsystem.com/e/ir?t=supermomonga-22&l=as2&o=9&a=B001NJNN42" width=1 height=1 border=0 alt="" style="border:none !important; margin:0px !important;"></li><li><a href="//www.amazon.co.jp/gp/product/B000J3FF6C/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=247&creative=1211&creativeASIN=B000J3FF6C&linkCode=as2&tag=supermomonga-22"><img src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B000J3FF6C&Format=_SL110_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=supermomonga-22"></a><img src="//ir-jp.amazon-adsystem.com/e/ir?t=supermomonga-22&l=as2&o=9&a=B000J3FF6C" width=1 height=1 border=0 alt="" style="border:none !important; margin:0px !important;"></li><li><a href="//www.amazon.co.jp/gp/product/B001A35V46/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=247&creative=1211&creativeASIN=B001A35V46&linkCode=as2&tag=supermomonga-22"><img src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B001A35V46&Format=_SL110_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=supermomonga-22"></a><img src="//ir-jp.amazon-adsystem.com/e/ir?t=supermomonga-22&l=as2&o=9&a=B001A35V46" width=1 height=1 border=0 alt="" style="border:none !important; margin:0px !important;"></li><li><a href="//www.amazon.co.jp/gp/product/B000VOSU2A/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=247&creative=1211&creativeASIN=B000VOSU2A&linkCode=as2&tag=supermomonga-22"><img src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B000VOSU2A&Format=_SL110_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=supermomonga-22"></a><img src="//ir-jp.amazon-adsystem.com/e/ir?t=supermomonga-22&l=as2&o=9&a=B000VOSU2A" width=1 height=1 border=0 alt="" style="border:none !important; margin:0px !important;"></li><li><a href="//www.amazon.co.jp/gp/product/B000NDFJNC/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=247&creative=1211&creativeASIN=B000NDFJNC&linkCode=as2&tag=supermomonga-22"><img src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B000NDFJNC&Format=_SL110_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=supermomonga-22"></a><img src="//ir-jp.amazon-adsystem.com/e/ir?t=supermomonga-22&l=as2&o=9&a=B000NDFJNC" width=1 height=1 border=0 alt="" style="border:none !important; margin:0px !important;"></li><li><a href="//www.amazon.co.jp/gp/product/B0019N1RKY/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=247&creative=1211&creativeASIN=B0019N1RKY&linkCode=as2&tag=supermomonga-22"><img src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B0019N1RKY&Format=_SL110_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=supermomonga-22"></a><img src="//ir-jp.amazon-adsystem.com/e/ir?t=supermomonga-22&l=as2&o=9&a=B0019N1RKY" width=1 height=1 border=0 alt="" style="border:none !important; margin:0px !important;"></li><li><a href="//www.amazon.co.jp/gp/product/B000VOONCQ/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=247&creative=1211&creativeASIN=B000VOONCQ&linkCode=as2&tag=supermomonga-22"><img src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B000VOONCQ&Format=_SL110_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=supermomonga-22"></a><img src="//ir-jp.amazon-adsystem.com/e/ir?t=supermomonga-22&l=as2&o=9&a=B000VOONCQ" width=1 height=1 border=0 alt="" style="border:none !important; margin:0px !important;"></li><li><a href="//www.amazon.co.jp/gp/product/B000SKNPIQ/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=247&creative=1211&creativeASIN=B000SKNPIQ&linkCode=as2&tag=supermomonga-22"><img src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B000SKNPIQ&Format=_SL110_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=supermomonga-22"></a><img src="//ir-jp.amazon-adsystem.com/e/ir?t=supermomonga-22&l=as2&o=9&a=B000SKNPIQ" width=1 height=1 border=0 alt="" style="border:none !important; margin:0px !important;"></li><li><a href="//www.amazon.co.jp/gp/product/B00857EREA/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=247&creative=1211&creativeASIN=B00857EREA&linkCode=as2&tag=supermomonga-22"><img src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B00857EREA&Format=_SL110_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=supermomonga-22"></a><img src="//ir-jp.amazon-adsystem.com/e/ir?t=supermomonga-22&l=as2&o=9&a=B00857EREA" width=1 height=1 border=0 alt="" style="border:none !important; margin:0px !important;"></li><li><a href="//www.amazon.co.jp/gp/product/B002AEG0RQ/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=247&creative=1211&creativeASIN=B002AEG0RQ&linkCode=as2&tag=supermomonga-22"><img src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B002AEG0RQ&Format=_SL110_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=supermomonga-22"></a><img src="//ir-jp.amazon-adsystem.com/e/ir?t=supermomonga-22&l=as2&o=9&a=B002AEG0RQ" width=1 height=1 border=0 alt="" style="border:none !important; margin:0px !important;"></li><li><a href="//www.amazon.co.jp/gp/product/B002AEG0S0/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=247&creative=1211&creativeASIN=B002AEG0S0&linkCode=as2&tag=supermomonga-22"><img src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B002AEG0S0&Format=_SL110_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=supermomonga-22"></a><img src="//ir-jp.amazon-adsystem.com/e/ir?t=supermomonga-22&l=as2&o=9&a=B002AEG0S0" width=1 height=1 border=0 alt="" style="border:none !important; margin:0px !important;"></li></ul></aside></div><script>var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-22136268-1"]),_gaq.push(["_setDomainName","supermomonga.com"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"//ssl":"//www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();</script></body></html><script>
  // twitter share button
  !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
  // pocket save button
  !function(d,i){if(!d.getElementById(i)){var j=d.createElement("script");j.id=i;j.src="https://widgets.getpocket.com/v1/j/btn.js?v=1";var w=d.getElementById(i);d.body.appendChild(j);}}(document,"pocket-btn-js");
  // Facebook like button
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/ja_JP/all.js#xfbml=1&appId=184200125074087";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
  // DISQUS
  var disqus_shortname = 'momonga';
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>