<!DOCTYPE html><html><head><meta charset=utf-8><meta content="IE=edge,chrome=1" http-equiv=X-UA-Compatible><title>資本主義の崩壊とEmacs Evilの勃興について - かなりすごいブログ</title><link href="/stylesheets/theme-56dc392b.css" rel=stylesheet /><link href="/stylesheets/monokai-16825c43.css" rel=stylesheet /></head><body role=main><header><h1><a href="/">かなりすごいブログ</a></h1></header><div id=main><div class=entry><div class=entry-header><h1> 資本主義の崩壊とEmacs Evilの勃興について </h1><div class=entry-tags><li class="default label"><i class=icon-tag></i><a href="/tags/emacs.html">Emacs</a></li><li class="default label"><i class=icon-tag></i><a href="/tags/evil.html">Evil</a></li></div><span class=entry-date>2014年12月01日</span></div><div class=entry-share><div class="share hatena"><a onclick="window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=530,width=510');return false;" href="//b.hatena.ne.jp/add?mode=confirm&amp;url=http://blog.supermomonga.com/articles/emacs-evil/evil-advent-calendar.html&amp;title=資本主義の崩壊とEmacs%20Evilの勃興について">はてブに追加</a></div><div class="share twitter"><a onclick="window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=230,width=600');return false;" href="//twitter.com/share?text=資本主義の崩壊とEmacs%20Evilの勃興について&amp;url=http://blog.supermomonga.com/articles/emacs-evil/evil-advent-calendar.html">この記事をツイート</a></div><div class="share feedly"><a target=_blank href="//cloud.feedly.com/#subscription%2Ffeed%2Fhttp%3A%2F%2Fblog.supermomonga.com%2Ffeed.xml">Feedlyで購読</a></div></div><div class=entry-body><h2 id="evil-advent-calendar-1日目">Evil Advent Calendar 1日目</h2><p><a href="//qiita.com/advent-calendar/2014/evil" rel=nofollow>Evil Advent Calendar 2014</a>1日目の記事になります。</p><p>明日の執筆者は未定です。というか私含めて2人しかエントリーしていません。Evil使いもっと増えて欲しい（もっと）。</p><p>1日目ということで、今日はポエムです。あとタイトルは考えるのが面倒だったので<a href="//pha22.net/hotentry/title/r?word=Evil" rel=nofollow>ホッテントリメーカー</a>で作りました。</p><h2 id="資本主義の崩壊とemacs-evilの勃興について">資本主義の崩壊とEmacs Evilの勃興について</h2><h3 id="1.">1.</h3><p>Emacsは単なるテキストエディタではなく、アプリケーション実行環境です。その表現力の高さから、ウェブブラウザやメーラー、IRCクライアントに始まりTwitterクライアントまで、様々なアプリケーションが動作し、それらは基本的に全てキーボードで操作を完結させることができます。それを指しEmacsはテキストエディタではなくOSだと言われることがありますが、まさにその通りだと私は思います。というのも、単なるテキストエディタに画像を表示する機能なんて要らないでしょうし、ましてや<a href="//www.emacswiki.org/emacs/EmacsXWidgets">GTKウィジェットを表示できるようにしようという試み</a>も起こらないでしょう。私は、Emacsが目指しているのはテキストエディタではなくアプリケーション実行環境であるということを明確に感じます。</p><p>そんなEmacsで動くVim風テキストエディタがリリースされたのは自然な流れだと言えます。Emacsデフォルトのテキスト編集機能はVimのそれに遠く及びません。Emacsには様々なアプリケーションを構築するための土台があるのですから、無ければ作ってしまえ、ということなのでしょう。</p><p>そして、この様にEmacsをアプリケーション実行環境として捉え、かつVimに親しみのある私がEmacsにEvilを導入したのは当然の成り行きでした。</p><h3 id="2.">2.</h3><p>Evilは私の想像以上の完成度でした。非常に高いレベルでVimのパラダイムが実現されており、かつEmacs Lispにて容易にその挙動をカスタマイズできる様に設計されていました。Emacs Lispを書くことができる人であれば、Vim scriptを書きVim用のプラグインを作るのと同じ感覚で、Evil用のプラグインを作る事も容易いでしょう。実際に、いくつかの有名なVimプラグインは既にEvil版として移植されています。</p><p>私はEvilに夢中になりました。Vimから本格的にEmacsへ移行しようかとも悩んだほどです。</p><h3 id="3.">3.</h3><p>Evilを使い始めてすぐ、私はその違和感に気づきました。Evilでは、Emacs元々の用語とバッティングしないように、Vimで言うところ<code>モード</code>を<code>ステート</code>と読んでいます。<code>挿入ステート</code>、<code>ビジュアルステート</code>といった具合です。更に、Vimには（当然）存在しない、元々のEmacsのキーバインドに戻るという、<code>Emacsステート</code>が存在します。そして、Evilには<code>evil-emacs-state-modes</code>という設定変数があり、ここに設定したモードでは、自動的にEvilが<code>Emacsステート</code>に切り替わります。デフォルトで、この変数には多くのモードが設定されています。この機能により、Evilはいわゆるアプリケーション実行環境であるEmacsにおいて、「テキストを編集する時はVimの操作感」を、「テキスト編集時以外はEmacs元々の操作感」を実現しています。</p><p>これは言うなれば、丁度あなたがお使いのOSと同じ様な感覚です。WindowsでもLinuxでもMac OS Xでも何でもよいのですが、Vimを使っている時の操作方法と、その他アプリケーションを使っている時の操作方法は基本的に全く異なるはずです。EmacsにEvilを導入することで、私は「Evilから出て他の操作をEmacs内で行う」時、「Vimから出て他の操作をOS内で行う」のと同じ感覚に駆られました。</p><p>本来なら、EvilがEmacs本来の機能や資産を損なわないように上手に実装されていると褒める所でしょうが、私はこの点について大きな違和感を感じました。</p><h3 id="4.">4.</h3><p>それもそのはずでした。私は、Vimに多くのプラグインを導入し、Vimを単なるテキストエディタとしてでなく、ターミナルに始まり、メーラー、Twitterクライアント、チャットサービスクライアントといった様々な目的で利用していたのです。私は、<code>evil-emacs-state-modes</code>によって、Vimの世界から突然素のEmacsの世界に引き戻されてしまうことに、非常にストレスを感じていたのです。</p><p>また、例えばVimでは<code>gt</code>, <code>gT</code>にてタブの切り替えを行えますが、Evilでこれを行うと、<code>Emacsステート</code>のタブに移動した瞬間、<code>gt</code>, <code>gT</code>での操作ができなくなり、意図しないタイミングでVimの世界から追い出されてしまうといった様な弊害もありました。</p><p>私はEmacsの世界とVimの世界を行き来することにすっかり辟易してしまいました。Emacsで動く全てのアプリケーションをVimライクに操作したい、そう思った私は、思い切って<code>evil-emacs-state-modes</code>に<code>nil</code>を設定しました。</p><h3 id="5.">5.</h3><p><code>evil-emacs-state-modes</code>に<code>nil</code>を設定することで、Emacsで動く各アプリケーションがほぼ全て、まともに動作しなくなりました。アプリケーションごとに独自に<code>Emacsステート</code>用のキーバインドが設定されており、それを全て無効にしてしまったのですから当然です。</p><p>私を待っていたのは、Emacsで動く全てのモード用に、Vim風のEvilキーバインドを1から割り当てていくという地道な作業でした。更に、Evilによって導入されるステートという独特の概念により、キーバインドの設定をするだけでは上手く動かないアプリケーションも存在します。たとえば、Emacs Lispで実装されたEmacsで動くターミナルエミュレータであるeshellがあります。eshellでは、通常<code>Emacsステート</code>においてはプロンプト上にカーソルが移動できないようになっていますが、Evilの<code>ノーマルステート</code>に入る事によってカーソルをプロンプト上に移動することができるようになってしまいます。その状態で<code>x</code>を打鍵したり、<code>i</code>を打鍵するなどして<code>挿入ステート</code>に入ってしまうと、プロンプトを書き換えることができてしまい、eshellの動作に良からぬ影響を及ぼしてしまいます。これを防ぐため、「<code>挿入ステート</code>に入った後、プロンプトと被らない適切な場所にカーソルを移動する」という関数をEmacs Lispで定義し、eshellモードの<code>ノーマルステート</code>における<code>i</code>や<code>a</code>へのマッピングとして割り当てることが必要でした。その他、私がVimで愛用しているVimShellと同じ操作感を実現するため、多数の独自関数・キーバインドを設定することが必要でした。（余談ですが、私はこうして出来上がったEvil用にカスタマイズされたeshellを、eshellとVimShellにちなんでEvilShellと呼んでいます。）</p><p>この様に、Emacsで動く全てのモードに関して、キーバインドの再定義や動作補助用の関数定義を行うといったことが必要でした。これはとても体力の要る、地道な作業です。「Vimのパラダイムと完全に協調する理想のEmacs」を求め、茨の道へ歩き出してしまったのです。</p><h3 id="6.">6.</h3><p>2014年12月1日現在でも、これらの設定を終えることはできていません。設定を終えた後は、Emacs Lispを習得し、普段愛用しているVimプラグイン達をEvil用に移植していく必要もあります。</p><p>理想のEmacsを手に入れるまでの道のりは長そうですが、私のEmacsが着実に私の理想に近づいていっていることだけは分かります。そして、地道に理想の環境を作リ上げていくのはなんと楽しい事でしょうか。</p><h2 id="おわり">おわり</h2><p>以上になります。</p><p>Evil、設定に苦労するけど超便利なのでみなさん使っていきましょう。</p></div><div class=entry-share><div class="share hatena"><a onclick="window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=530,width=510');return false;" href="//b.hatena.ne.jp/add?mode=confirm&amp;url=http://blog.supermomonga.com/articles/emacs-evil/evil-advent-calendar.html&amp;title=資本主義の崩壊とEmacs%20Evilの勃興について">はてブに追加</a></div><div class="share twitter"><a onclick="window.open(this.href, '', 'menubar=no,toolbar=no,resizable=yes,scrollbars=yes,height=230,width=600');return false;" href="//twitter.com/share?text=資本主義の崩壊とEmacs%20Evilの勃興について&amp;url=http://blog.supermomonga.com/articles/emacs-evil/evil-advent-calendar.html">この記事をツイート</a></div><div class="share feedly"><a target=_blank href="//cloud.feedly.com/#subscription%2Ffeed%2Fhttp%3A%2F%2Fblog.supermomonga.com%2Ffeed.xml">Feedlyで購読</a></div></div><div class=entry-author><div class=avatar><img src="/images/kokoro-chan-da2b7132.png"></div><div class=profile><h3> supermomonga </h3><p> かなりすごいことでゆうめい。したまちでしらぬものはいない。 </p><a href="https://twitter.com/supermomonga" class=twitter-follow-button data-show-count=false data-lang=ja data-size=large data-dnt=true>@supermomongaさんをフォロー</a></div></div><div class=entry-meta><h3> あわせてよみたい </h3><ul><li><a href="/articles/vim/vim-douzo.html">･▿･)つVim)‾▿◝ ),;&#8217;</a></li><li><a href="/articles/emacs/emacs-and-vi.html">EmacsユーザーがVimを1ヶ月使った感想</a></li><li><a href="/articles/jruby/javafx-rawr.html">RubyでGUIアプリを作るならJRuby+JavaFX+Rawrで決まり！</a></li><li><a href="/articles/vim/automatic.html">automatic.vimでウィンドウの一時的分割をハンドリングしよう</a></li><li><a href="/articles/vim/neobundle-sugoibenri.html">ももんが流NeoBundle管理術</a></li><li><a href="/articles/vim/taiwa.html">Vimと対話せよ</a></li><li><a href="/articles/vim/vimshell-dynamicprompt.html">VimShellが動的プロンプトに対応しました（やばい）</a></li><li><a href="/articles/vim/jazzradio-vim-released.html">ジャズだって聴ける。そう、Vimならね。</a></li><li><a href="/articles/vim/neobundle-sugoi-setting.html">新・ももんが流NeoBundle管理術（あたらしい）</a></li><li><a href="/articles/りんごまっち/yabai.html">ウェブサービスリリースしたので前代未聞のやばい広告枠売ります</a></li></ul></div></div><aside><h2> タグ一覧ですよ </h2><ul><li class="default label"><i class=icon-tag></i><a href="/tags/emacs.html">Emacs</a>(6) </li><li class="default label"><i class=icon-tag></i><a href="/tags/java.html">Java</a>(5) </li><li class="default label"><i class=icon-tag></i><a href="/tags/jdee.html">JDEE</a>(5) </li><li class="default label"><i class=icon-tag></i><a href="/tags/swt.html">SWT</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/svn.html">svn</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/ubuntu.html">Ubuntu</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/facebook.html">facebook</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/windows.html">Windows</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/mac.html">Mac</a>(2) </li><li class="default label"><i class=icon-tag></i><a href="/tags/fx.html">FX</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/metatrader4.html">MetaTrader4</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/vim.html">Vim</a>(20) </li><li class="default label"><i class=icon-tag></i><a href="/tags/ruby.html">Ruby</a>(5) </li><li class="default label"><i class=icon-tag></i><a href="/tags/jruby.html">JRuby</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/javafx.html">JavaFX</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/lingr.html">Lingr</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/neobundle.html">NeoBundle</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/minecraft.html">Minecraft</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/thingspast.html">ThingsPast</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/others.html">Others</a>(3) </li><li class="default label"><i class=icon-tag></i><a href="/tags/elixir.html">Elixir</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/javascript.html">Javascript</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/neta.html">Neta</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/mac-os-x.html">Mac OS X</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/homebrew.html">homebrew</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/rbenv.html">rbenv</a>(1) </li><li class="default label"><i class=icon-tag></i><a href="/tags/evil.html">Evil</a>(1) </li></ul><h2> 聴いてるやつ </h2><ul class=amazon_products><li><a href="//www.amazon.co.jp/gp/product/B000F6YUD2/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=247&creative=1211&creativeASIN=B000F6YUD2&linkCode=as2&tag=supermomonga-22"><img src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B000F6YUD2&Format=_SL110_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=supermomonga-22"></a><img src="//ir-jp.amazon-adsystem.com/e/ir?t=supermomonga-22&l=as2&o=9&a=B000F6YUD2" width=1 height=1 border=0 alt="" style="border:none !important; margin:0px !important;"></li><li><a href="//www.amazon.co.jp/gp/product/B001NJNN42/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=247&creative=1211&creativeASIN=B001NJNN42&linkCode=as2&tag=supermomonga-22"><img src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B001NJNN42&Format=_SL110_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=supermomonga-22"></a><img src="//ir-jp.amazon-adsystem.com/e/ir?t=supermomonga-22&l=as2&o=9&a=B001NJNN42" width=1 height=1 border=0 alt="" style="border:none !important; margin:0px !important;"></li><li><a href="//www.amazon.co.jp/gp/product/B000J3FF6C/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=247&creative=1211&creativeASIN=B000J3FF6C&linkCode=as2&tag=supermomonga-22"><img src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B000J3FF6C&Format=_SL110_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=supermomonga-22"></a><img src="//ir-jp.amazon-adsystem.com/e/ir?t=supermomonga-22&l=as2&o=9&a=B000J3FF6C" width=1 height=1 border=0 alt="" style="border:none !important; margin:0px !important;"></li><li><a href="//www.amazon.co.jp/gp/product/B001A35V46/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=247&creative=1211&creativeASIN=B001A35V46&linkCode=as2&tag=supermomonga-22"><img src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B001A35V46&Format=_SL110_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=supermomonga-22"></a><img src="//ir-jp.amazon-adsystem.com/e/ir?t=supermomonga-22&l=as2&o=9&a=B001A35V46" width=1 height=1 border=0 alt="" style="border:none !important; margin:0px !important;"></li><li><a href="//www.amazon.co.jp/gp/product/B000VOSU2A/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=247&creative=1211&creativeASIN=B000VOSU2A&linkCode=as2&tag=supermomonga-22"><img src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B000VOSU2A&Format=_SL110_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=supermomonga-22"></a><img src="//ir-jp.amazon-adsystem.com/e/ir?t=supermomonga-22&l=as2&o=9&a=B000VOSU2A" width=1 height=1 border=0 alt="" style="border:none !important; margin:0px !important;"></li><li><a href="//www.amazon.co.jp/gp/product/B000NDFJNC/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=247&creative=1211&creativeASIN=B000NDFJNC&linkCode=as2&tag=supermomonga-22"><img src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B000NDFJNC&Format=_SL110_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=supermomonga-22"></a><img src="//ir-jp.amazon-adsystem.com/e/ir?t=supermomonga-22&l=as2&o=9&a=B000NDFJNC" width=1 height=1 border=0 alt="" style="border:none !important; margin:0px !important;"></li><li><a href="//www.amazon.co.jp/gp/product/B0019N1RKY/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=247&creative=1211&creativeASIN=B0019N1RKY&linkCode=as2&tag=supermomonga-22"><img src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B0019N1RKY&Format=_SL110_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=supermomonga-22"></a><img src="//ir-jp.amazon-adsystem.com/e/ir?t=supermomonga-22&l=as2&o=9&a=B0019N1RKY" width=1 height=1 border=0 alt="" style="border:none !important; margin:0px !important;"></li><li><a href="//www.amazon.co.jp/gp/product/B000VOONCQ/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=247&creative=1211&creativeASIN=B000VOONCQ&linkCode=as2&tag=supermomonga-22"><img src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B000VOONCQ&Format=_SL110_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=supermomonga-22"></a><img src="//ir-jp.amazon-adsystem.com/e/ir?t=supermomonga-22&l=as2&o=9&a=B000VOONCQ" width=1 height=1 border=0 alt="" style="border:none !important; margin:0px !important;"></li><li><a href="//www.amazon.co.jp/gp/product/B000SKNPIQ/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=247&creative=1211&creativeASIN=B000SKNPIQ&linkCode=as2&tag=supermomonga-22"><img src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B000SKNPIQ&Format=_SL110_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=supermomonga-22"></a><img src="//ir-jp.amazon-adsystem.com/e/ir?t=supermomonga-22&l=as2&o=9&a=B000SKNPIQ" width=1 height=1 border=0 alt="" style="border:none !important; margin:0px !important;"></li><li><a href="//www.amazon.co.jp/gp/product/B00857EREA/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=247&creative=1211&creativeASIN=B00857EREA&linkCode=as2&tag=supermomonga-22"><img src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B00857EREA&Format=_SL110_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=supermomonga-22"></a><img src="//ir-jp.amazon-adsystem.com/e/ir?t=supermomonga-22&l=as2&o=9&a=B00857EREA" width=1 height=1 border=0 alt="" style="border:none !important; margin:0px !important;"></li><li><a href="//www.amazon.co.jp/gp/product/B002AEG0RQ/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=247&creative=1211&creativeASIN=B002AEG0RQ&linkCode=as2&tag=supermomonga-22"><img src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B002AEG0RQ&Format=_SL110_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=supermomonga-22"></a><img src="//ir-jp.amazon-adsystem.com/e/ir?t=supermomonga-22&l=as2&o=9&a=B002AEG0RQ" width=1 height=1 border=0 alt="" style="border:none !important; margin:0px !important;"></li><li><a href="//www.amazon.co.jp/gp/product/B002AEG0S0/ref=as_li_qf_sp_asin_il?ie=UTF8&camp=247&creative=1211&creativeASIN=B002AEG0S0&linkCode=as2&tag=supermomonga-22"><img src="//ws-fe.amazon-adsystem.com/widgets/q?_encoding=UTF8&ASIN=B002AEG0S0&Format=_SL110_&ID=AsinImage&MarketPlace=JP&ServiceVersion=20070822&WS=1&tag=supermomonga-22"></a><img src="//ir-jp.amazon-adsystem.com/e/ir?t=supermomonga-22&l=as2&o=9&a=B002AEG0S0" width=1 height=1 border=0 alt="" style="border:none !important; margin:0px !important;"></li></ul></aside></div><script>var _gaq=_gaq||[];_gaq.push(["_setAccount","UA-22136268-1"]),_gaq.push(["_setDomainName","supermomonga.com"]),_gaq.push(["_trackPageview"]),function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src=("https:"==document.location.protocol?"//ssl":"//www")+".google-analytics.com/ga.js";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}();</script></body></html><script>
  // twitter share button
  !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');
  // pocket save button
  !function(d,i){if(!d.getElementById(i)){var j=d.createElement("script");j.id=i;j.src="https://widgets.getpocket.com/v1/j/btn.js?v=1";var w=d.getElementById(i);d.body.appendChild(j);}}(document,"pocket-btn-js");
  // Facebook like button
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/ja_JP/all.js#xfbml=1&appId=184200125074087";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));
  // DISQUS
  var disqus_shortname = 'momonga';
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>